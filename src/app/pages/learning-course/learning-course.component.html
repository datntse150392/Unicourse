<div class="card">
  <div class="w-full h-full">
    <header>
      <div class="nav-left">
        <img [routerLink]="['/']" class="pi pi-angle-left" src="{{ LOGO }}" />
        <div class="logo-title">
          <p *ngIf="course">{{ course.title }}</p>
        </div>
      </div>
      <!-- <div class="nav-right">
        <div class="container">
          <i
            class="pi pi-file"
            style="
              font-size: 1rem;
              color: #45494f;
              margin-right: 0.5rem;
              cursor: pointer;
            "
          ></i>
          <p>Ghi chú</p>
        </div>
        <div class="container">
          <i
            class="pi pi-info-circle"
            style="
              font-size: 1rem;
              color: #45494f;
              margin-right: 0.5rem;
              cursor: pointer;
            "
          ></i>
          <p>Hỗ trợ</p>
        </div>
        <div class="container">
          <i
            class="pi pi-chart-pie"
            style="
              font-size: 1.2rem;
              color: #45494f;
              margin-right: 0.5rem;
              cursor: pointer;
            "
          ></i>
          <p>0/{{ course && course.tracks.length }} chương</p>
        </div>
      </div> -->
    </header>
    <div class="learning-video grid grid-cols-12 gap-2">
      <div class="video col-span-9">
        <div class="container">
          <iframe
            width="100%"
            [ngStyle]="{ height: '85vh' }"
            [src]="videoUrl"
            frameborder="0"
            allowfullscreen
            style="border: none"
          ></iframe>
        </div>
      </div>
      <div class="course-sidebar col-span-3">
        <div
          class="sidebar-container"
          id="accordion-collapse"
          data-accordion="collapse"
        >
          <div *ngFor="let track of course.tracks">
            <h2 id="accordion-color-heading-{{ track._id }}">
              <button
                type="button"
                class="flex items-center justify-between w-full p-5 font-medium rtl:text-right text-gray-500 border border-b-0 border-gray-200 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 gap-3"
                data-accordion-target="#accordion-collapse-body-1"
                aria-expanded="true"
                aria-controls="accordion-collapse-body-1"
                [attr.data-accordion-target]="
                  '#accordion-color-body-' + track._id
                "
                aria-expanded="false"
                [attr.aria-controls]="'accordion-color-body-' + track._id"
                (click)="track.showBody = !track.showBody"
              >
                <span class="text-black">{{ track.chapterTitle }}</span>
                <svg
                  data-accordion-icon
                  class="w-2 h-2 rotate-180 shrink-0 text-black"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 10 6"
                >
                  <path
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5 5 1 1 5"
                  />
                </svg>
              </button>
            </h2>
            <div
              *ngIf="track.showBody"
              id="accordion-color-body-{{ track._id }}"
            >
              <div
                class="border border border-gray-100 dark:border-gray-700 dark:bg-gray-900"
              >
                <ng-container *ngFor="let step of track.track_steps">
                  <div
                    *ngIf="this.conntent_url == step.content_url"
                    class="step-track w-full p-5 flex flex-column gap-2 bg-[#B3E0FF]"
                  >
                    <p
                      [routerLink]="[
                        '/learning-course/',
                        this.course._id,
                        step.content_url
                      ]"
                      [ngStyle]="{ 'font-size': '1rem', cursor: 'pointer' }"
                      class="font-bold"
                    >
                      {{ step.position }}. {{ step.title }}
                    </p>
                    <div class="duration flex flex-row items-center gap-2">
                      <svg
                        aria-hidden="true"
                        focusable="false"
                        data-prefix="fas"
                        data-icon="compact-disc"
                        class="h-5 rotate-180 shrink-0 text-green"
                        role="img"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 512 512"
                      >
                        <path
                          [ngStyle]="{ color: 'rgba(240,81,35,.8)' }"
                          fill="currentColor"
                          d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM80.72 256H79.63c-9.078 0-16.4-8.011-15.56-17.34C72.36 146 146.5 72.06 239.3 64.06C248.3 63.28 256 70.75 256 80.09c0 8.35-6.215 15.28-14.27 15.99C164.7 102.9 103.1 164.3 96.15 241.4C95.4 249.6 88.77 256 80.72 256zM256 351.1c-53.02 0-96-43-96-95.1s42.98-96 96-96s96 43 96 96S309 351.1 256 351.1zM256 224C238.3 224 224 238.2 224 256s14.3 32 32 32c17.7 0 32-14.25 32-32S273.7 224 256 224z"
                        ></path>
                      </svg>
                      <span>{{ convertToHour(step.duration) }}</span>
                    </div>
                  </div>
                  <div
                    *ngIf="this.conntent_url != step.content_url"
                    class="step-track w-full p-5 flex flex-column gap-2 bg-[#e7e7e7]"
                  >
                    <p
                      [routerLink]="[
                        '/learning-course/',
                        this.course._id,
                        step.content_url
                      ]"
                      [ngStyle]="{ 'font-size': '1rem', cursor: 'pointer' }"
                    >
                      {{ step.position }}. {{ step.title }}
                    </p>
                    <div class="duration flex flex-row items-center gap-2">
                      <svg
                        aria-hidden="true"
                        focusable="false"
                        data-prefix="fas"
                        data-icon="compact-disc"
                        class="h-5 rotate-180 shrink-0"
                        role="img"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 512 512"
                      >
                        <path
                          fill="currentColor"
                          d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM80.72 256H79.63c-9.078 0-16.4-8.011-15.56-17.34C72.36 146 146.5 72.06 239.3 64.06C248.3 63.28 256 70.75 256 80.09c0 8.35-6.215 15.28-14.27 15.99C164.7 102.9 103.1 164.3 96.15 241.4C95.4 249.6 88.77 256 80.72 256zM256 351.1c-53.02 0-96-43-96-95.1s42.98-96 96-96s96 43 96 96S309 351.1 256 351.1zM256 224C238.3 224 224 238.2 224 256s14.3 32 32 32c17.7 0 32-14.25 32-32S273.7 224 256 224z"
                        ></path>
                      </svg>
                      <span>{{ convertToHour(step.duration) }}</span>
                    </div>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class="group-btn flex flex-row gap-4">
        <div
          *ngIf="this.indexLesson > 0"
          [routerLink]="[
            '/learning-course/',
            this.courseId,
            this.previousLesson
          ]"
          class="btn-left"
        >
          <i
            class="pi pi-angle-left"
            style="
              font-size: 1.5rem;
              color: #0093fc;
              margin-right: 0.5rem;
              cursor: pointer;
            "
          ></i>
          <p>BÀI TRƯỚC</p>
        </div>
        <!-- Btn Next Lesson -->

        <div
          *ngIf="this.trackSteps.length - 1 > this.indexLesson"
          [routerLink]="['/learning-course/', this.courseId, this.nextLesson]"
          class="btn-right bg-gradient-to-r from-cyan-500 to-blue-500 hover:bg-gradient-to-bl"
        >
          <p>BÀI TIẾP THEO</p>
          <i
            class="pi pi-angle-right"
            style="
              font-size: 1.5rem;
              color: #0093fc;
              margin-right: 0.5rem;
              cursor: pointer;
            "
          ></i>
        </div>
      </div>

      <app-chat-bot class="absolute left-3 bottom-5"></app-chat-bot>
    </footer>
  </div>
</div>
